<!doctype html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
  <title>client side test for node-qrcode</title>  
  <script src="qrcode.js"></script>
</head>

<body>
  <h1 class="title">node-qrcode</h1>
  <div>
    <p id="error" class="error"></p>
    <canvas id="canvas" class="qrcode-image"></canvas>
  </div>

  <script>
    var QRCode = require('qrcode')

    QRCode.toDataURL('I am a pony!', function (err, url) {
      console.log(url)
    })


    // var errorEl = document.getElementById('error')
    // var canvasEl = document.getElementById('canvas')

    // function debounce(func, wait, immediate) {
    //   var timeout
    //   return function () {
    //     var context = this
    //     var args = arguments
    //     var later = function () {
    //       timeout = null
    //       if (!immediate) func.apply(context, args)
    //     }

    //     var callNow = immediate && !timeout
    //     clearTimeout(timeout)
    //     timeout = setTimeout(later, wait)
    //     if (callNow) func.apply(context, args)
    //   }
    // }

    // function drawQR(text) {
    //   errorEl.style.display = 'none'
    //   canvasEl.style.display = 'block'

    //   QRCode.toCanvas(canvasEl, text, {
    //     version: versionEl.value,
    //     errorCorrectionLevel: errorLevelEl.options[errorLevelEl.selectedIndex].text,
    //     margin: marginEl.value,
    //     color: {
    //       light: lightColorEl.value,
    //       dark: darkColorEl.value
    //     },
    //     toSJISFunc: QRCode.toSJIS
    //   }, function (error, canvas) {
    //     if (error) {
    //       canvasEl.style.display = 'none'
    //       errorEl.style.display = 'inline'
    //       errorEl.textContent = error
    //     }
    //   })
    // }

    // var updateQR = debounce(function () {
    //   var mode = modeEl.options[modeEl.selectedIndex].text
    //   if (mode !== 'Auto') {
    //     drawQR([{ data: textEl.value, mode: mode }])
    //   } else {
    //     drawQR(textEl.value)
    //   }
    // }, 250)

    // versionEl.addEventListener('change', updateQR, false)
    // errorLevelEl.addEventListener('change', updateQR, false)
    // modeEl.addEventListener('change', updateQR, false)
    // marginEl.addEventListener('change', updateQR, false)
    // lightColorEl.addEventListener('change', updateQR, false)
    // darkColorEl.addEventListener('change', updateQR, false)
    // textEl.addEventListener('keyup', updateQR, false)

    // for (var i = 1; i <= 40; i++) {
    //   versionEl.options[versionEl.options.length] = new Option(i.toString(), i)
    // }

    // drawQR(textEl.value)
  </script>

</body>

</html>